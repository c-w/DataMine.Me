<!doctype html>
<html>
  <head>
    <title>My readings</title>

    <script type='text/javascript' src='https://code.jquery.com/jquery-1.11.3.min.js'></script>
    <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/Shuffle/3.1.1/jquery.shuffle.modernizr.js'></script>
    <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/js/materialize.min.js'></script>
    <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js'></script>
    <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.17.0/URI.min.js'></script>
    <script type='text/javascript' src='https://cdn.rawgit.com/c-w/jquery-handlebars-simple/1b8deea/jquery-handlebars-simple.min.js'></script>
    <script type='text/javascript' src='https://cdn.rawgit.com/c-w/jquery-materialize-labelled-dropdown/814ee8a/jquery-materialize-labelled-dropdown.min.js'></script>
    <script type='text/javascript' src='./page.js'></script>

    <link type='text/css' rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/css/materialize.min.css'>
    <link type='text/css' rel='stylesheet' href='https://fonts.googleapis.com/icon?family=Material+Icons'>
    <link type="text/css" rel="stylesheet" href="./style.css">
  </head>

  <body class='blue-grey'>
    <script id='helpers' type='text/javascript'>
      Handlebars.registerHelper('stringify', function(json) {
        return JSON.stringify(json);
      });

      Handlebars.registerHelper('permalink', function(el) {
        return window.location.href.split('?')[0] + '?postId=' + el.uid;
      });
    </script>

    <script id='search-template' type='text/handlebars'>
      <form id='search-form'>
        <div class='input-field'>
          <input id='search-input' type='search' required autocomplete='off'>
          <label for='search'><i class='material-icons'>search</i></label>
          <i class='material-icons'>close</i>
        </div>
      </form>
    </script>

    <script id='filters-template' type='text/handlebars'>
      <ul id='filters-dropdown' class='dropdown-content'>
        <li class='dropdown-item filter active' data-group=''><a href='#!'>All ({{totalPosts}})</a></li>
        {{#each filters}}
        <li class='dropdown-item filter' data-group='{{this.name}}'><a href='#!'>{{this.name}} ({{this.count}})</a></li>
        {{/each}}
      </ul>

      <a id='filters-button' class='dropdown-button' href='#!' data-activates='filters-dropdown'>
        <span class='dropdown-label' data-format='Category: {0}'></span>
        <i class='material-icons right'>arrow_drop_down</i>
      </a>

      <script type='text/javascript'>
        $(document).ready(function() {
          $('#filters-button').labelled_dropdown();
        });
      <{{!}}/script>
    </script>

    <script id='sorts-template' type='text/handlebars'>
      <ul id='sorts-dropdown' class='dropdown-content'>
        <li class='dropdown-item sort active' data-reverse='true' data-by='date'><a href='#!'>New&rarr;Old</a></li>
        <li class='dropdown-item sort' data-reverse='false' data-by='date'><a href='#!'>Old&rarr;New</a></li>
        <li class='divider'></li>
        <li class='dropdown-item sort' data-reverse='false' data-by='title'><a href='#!'>Title A&rarr;Z</a></li>
        <li class='dropdown-item sort' data-reverse='true' data-by='title'><a href='#!'>Title Z&rarr;A</a></li>
      </ul>

      <a id='sorts-button' class='dropdown-button' href='#!' data-activates='sorts-dropdown'>
        <span class='dropdown-label' data-format='Order: {0}'></span>
        <i class='material-icons right'>arrow_drop_down</i>
      </a>

      <script type='text/javascript'>
        $(document).ready(function() {
          $('#sorts-button').labelled_dropdown();
        });
      <{{!}}/script>
    </script>

    <script id='content-template' type='text/handlebars'>
      <div class='container'>
        <div class='row'>
          {{#each this}}
          <div class='card col s12' id='{{this.uid}}' data-groups='{{stringify this.topics}}' data-date='{{this.date}}' data-title='{{this.title}}'>
            <div class='card-content'>
              <span class='card-title'>{{this.title}}</span>
              <p>{{this.summary}}</p>
            </div>
            <div class='card-action'>
              <a href='{{this.url}}'>Origin</a>
              <a href='{{permalink this}}'>Permalink</a>
            </div>
          </div>
          {{/each}}
        </div>
      </div>
    </script>

    <div id='nav' class='navbar-fixed'>
      <nav>
        <div class='nav-wrapper'>
          <ul class='left'>
            <li>
              <div id='search'></div>
            </li>
          </ul>
          <ul class='right'>
            <li>
              <div id='filters'></div>
            </li>
            <li>
              <div id='sorts'></div>
            </li>
          </ul>
        </div>
      </nav>
    </div>

    <div id='content'></div>
  </body>
</html>
